/*!
 * bigdata (https://uab-energetics.github.io/bigdata-app/html/)
 * Copyright 2017 chrisrocco
 * Licensed under the Themeforest Standard Licenses
 */

!function(global,factory){if("function"==typeof define&&define.amd)define("/ApplicationService",["exports","jquery","AuthService","DataService"],factory);else if("undefined"!=typeof exports)factory(exports,require("jquery"),require("AuthService"),require("DataService"));else{var mod={exports:{}};factory(mod.exports,global.jQuery,global.AuthService,global.DataService),global.ApplicationService=mod.exports}}(this,function(exports,_jquery,_AuthService,_DataService){"use strict";function joinStudy(){var userKey=AuthService.getUser()._key;swal({title:"Join Project!",text:"Enter a registration code:",type:"input",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Ask your project manager",showLoaderOnConfirm:!0},function(inputValue){if(!1===inputValue)return!1;if(""===inputValue)return swal.showInputError("You need to write something!"),!1;var promise=DataService.postProjectEnrollments(inputValue,userKey);promise.success(function(res){var projectName=res.studyName;swal({title:"Success!",text:"You have joined "+projectName,type:"success",showCancelButton:!1,confirmButtonClass:"btn-success",confirmButtonText:"OK",closeOnConfirm:!1})}),promise.fail(function(res){409!==res.status?404!==res.status?swal({title:"Opps...",text:"Something went wrong.",type:"error",showCancelButton:!1,confirmButtonClass:"btn-danger",confirmButtonText:"OK",closeOnConfirm:!1}):swal({title:"Invalid Code",text:"That doesn't look like an active registration code!",type:"error",showCancelButton:!1,confirmButtonClass:"btn-danger",confirmButtonText:"OK",closeOnConfirm:!1}):swal({title:"Wait a Minute!",text:"You're already in that study",type:"warning",showCancelButton:!1,confirmButtonClass:"btn-warning",confirmButtonText:"OK",closeOnConfirm:!1})})})}function renderSession(){(0,_jquery2.default)(managerOnlySelector).hide();var user=AuthService.getUser();user&&((0,_jquery2.default)(emailSelector).html(user.email),(0,_jquery2.default)(firstNameSelector).html(user.first_name),(0,_jquery2.default)(lastNameSelector).html(user.last_name),"manager"===user.role&&(0,_jquery2.default)(managerOnlySelector).show())}Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderSession=exports.joinStudy=void 0;var _jquery2=babelHelpers.interopRequireDefault(_jquery),AuthService=babelHelpers.interopRequireWildcard(_AuthService),DataService=babelHelpers.interopRequireWildcard(_DataService),emailSelector=".bdEmail",firstNameSelector=".bdFirstName",lastNameSelector=".bdLastName",managerOnlySelector=".bdManagerOnly";exports.joinStudy=joinStudy,exports.renderSession=renderSession});