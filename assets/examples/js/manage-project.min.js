/*!
 * bigdata (https://uab-energetics.github.io/bigdata-app/html/)
 * Copyright 2017 chrisrocco
 * Licensed under the Themeforest Standard Licenses
 */

function submitPaperUploadForm(){var formData=new FormData,file=$("#papersCSV")[0].files[0];formData.append("papersCSV",file);var promise=DataService.uploadPapersCSV(localStorage.projectKey,formData);return promise.success(function(data){}),promise.error(function(response){var error=response.responseJSON;switch(error.reason){case"columnCountError":alert("Invalid column count on line "+error.row);break;case"parseFailure":alert("Could not parse csv");break;case"emptyFileError":alert("Empty File")}}),!1}function init(){DataService.loadManageProject(localStorage.projectKey).success(function(data){var projectObject=data.project,papers=data.papers;$("[data-projectname]").html(projectObject.name);for(var outlet=document.querySelector("#templateOutlet"),template=document.querySelector("#paperTemplate").content,i=0;i<papers.length;i++){var paper=papers[i];paper.status="active",template.querySelector("[data-title]").textContent=paper.title,template.querySelector("[data-desc]").textContent=paper.description.substring(0,33)+"..",template.querySelector("[data-assignmentCount]").textContent=paper.assignmentCount,template.querySelector("[data-status]").textContent=paper.status,outlet.appendChild(template.cloneNode(!0))}initFooTable(),initDropify()})}function initFooTable(){$("#papersTable").footable(),$(".filter-ui-status").on("change",function(){var filtering=FooTable.get("#papersTable").use(FooTable.Filtering),filter=$(this).val();"none"===filter?filtering.removeFilter("status"):filtering.addFilter("status",filter,["status"]),filtering.filter()})}function initDropify(){$("#papersCSV").dropify({messages:{default:"Drag and drop a file here or click",replace:"Drag and drop or click to replace",remove:"Remove",error:"Ooops, something is off."},showErrors:!1})}!function(document,window,$){"use strict";var Site=window.Site;$(document).ready(function($){Site.run(),init()})}(document,window,jQuery);