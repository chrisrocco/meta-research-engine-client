/*!
 * bigdata (https://uab-energetics.github.io/bigdata-app/html/)
 * Copyright 2017 chrisrocco
 * Licensed under the Themeforest Standard Licenses
 */

function loadProjects(){for(var projectTemplate=document.querySelector("#projectPanel"),ul=document.querySelector("#project-ul");ul.hasChildNodes();)ul.removeChild(ul.lastChild);DataService.getProjectsData().success(function(data){for(var pr=0;pr<data.projects.length;pr++){var projectData=data.projects[pr];projectTemplate.content.querySelector("[data-name]").textContent=projectData.name,projectTemplate.content.querySelectorAll("[data-key]")[0].dataset.key=projectData._key,projectTemplate.content.querySelectorAll("[data-key]")[1].dataset.key=projectData._key,projectTemplate.content.querySelector("[data-rac]").textContent=projectData.registrationCode;var clone=projectTemplate.content.cloneNode(!0);ul.appendChild(clone)}})}function submitNewProjectForm(){var form=document.forms.createProjectForm,projectObject={name:form.name.value,description:form.description.value};DataService.postProject(projectObject).success(function(response){swal({title:"Project Created!",text:"Project Registration Code: "+response.registrationCode,type:"success",showCancelButton:!1,confirmButtonClass:"btn-success",confirmButtonText:"OK",closeOnConfirm:!1}),loadProjects()})}function openProjectEditor(buttonElement){swal({title:"Are you sure?",text:"Editing the project structure will make it hard to compare different versions!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, edit it!",closeOnConfirm:!1},function(){localStorage.projectKey=buttonElement.dataset.key,window.location="project-builder.html"})}function openProject(buttonElement){localStorage.projectKey=buttonElement.dataset.key,window.location="manage-project.html"}$(document).ready(function(){AppProjects.run(),loadProjects()});